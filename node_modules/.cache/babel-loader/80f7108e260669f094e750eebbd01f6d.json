{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/ericl/findabudbud/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"C:/Users/ericl/findabudbud/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _slicedToArray from \"C:/Users/ericl/findabudbud/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\ericl\\\\findabudbud\\\\src\\\\Account.js\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport { useState, useEffect } from \"react\";\nimport { supabase } from \"./supabaseClient\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nvar Account = function Account(_ref) {\n  _s();\n\n  var session = _ref.session;\n\n  var _useState = useState(true),\n      _useState2 = _slicedToArray(_useState, 2),\n      loading = _useState2[0],\n      setLoading = _useState2[1];\n\n  var _useState3 = useState(null),\n      _useState4 = _slicedToArray(_useState3, 2),\n      username = _useState4[0],\n      setUsername = _useState4[1];\n\n  var _useState5 = useState(null),\n      _useState6 = _slicedToArray(_useState5, 2),\n      brawl_stars = _useState6[0],\n      setBrawlStars = _useState6[1];\n\n  var _useState7 = useState(null),\n      _useState8 = _slicedToArray(_useState7, 2),\n      avatar_url = _useState8[0],\n      setAvatarUrl = _useState8[1];\n\n  useEffect(function () {\n    getProfile();\n  }, [session]);\n\n  var getProfile = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n      var user, _yield$supabase$from$, data, error, status, lstOfPreferences;\n\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              setLoading(true);\n              user = supabase.auth.user();\n              _context.next = 5;\n              return supabase.from(\"profiles\").select(\"username, website, brawl_stars, avatar_url\").eq(\"id\", user.id).single();\n\n            case 5:\n              _yield$supabase$from$ = _context.sent;\n              data = _yield$supabase$from$.data;\n              error = _yield$supabase$from$.error;\n              status = _yield$supabase$from$.status;\n\n              if (!(error && status !== 406)) {\n                _context.next = 11;\n                break;\n              }\n\n              throw error;\n\n            case 11:\n              lstOfPreferences = [];\n\n              if (data) {\n                setUsername(data.username);\n                setBrawlStars(data.brawl_stars);\n                setAvatarUrl(data.avatar_url);\n\n                if (data.brawl_stars) {\n                  lstOfPreferences.push(\"Brawl Stars\");\n                  lstOfPreferences.push(\"Porn\");\n                }\n\n                alert(lstOfPreferences);\n              }\n\n              _context.next = 18;\n              break;\n\n            case 15:\n              _context.prev = 15;\n              _context.t0 = _context[\"catch\"](0);\n              alert(_context.t0.message);\n\n            case 18:\n              _context.prev = 18;\n              setLoading(false);\n              return _context.finish(18);\n\n            case 21:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 15, 18, 21]]);\n    }));\n\n    return function getProfile() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var updateProfile = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(e) {\n      var user, updates, _yield$supabase$from$2, error;\n\n      return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              e.preventDefault();\n              _context2.prev = 1;\n              setLoading(true);\n              user = supabase.auth.user();\n              updates = {\n                id: user.id,\n                username: username,\n                brawl_stars: brawl_stars,\n                avatar_url: avatar_url,\n                updated_at: new Date()\n              };\n              _context2.next = 7;\n              return supabase.from(\"profiles\").upsert(updates, {\n                returning: \"minimal\" // Don't return the value after inserting\n\n              });\n\n            case 7:\n              _yield$supabase$from$2 = _context2.sent;\n              error = _yield$supabase$from$2.error;\n\n              if (!error) {\n                _context2.next = 11;\n                break;\n              }\n\n              throw error;\n\n            case 11:\n              _context2.next = 16;\n              break;\n\n            case 13:\n              _context2.prev = 13;\n              _context2.t0 = _context2[\"catch\"](1);\n              alert(_context2.t0.message);\n\n            case 16:\n              _context2.prev = 16;\n              setLoading(false);\n              return _context2.finish(16);\n\n            case 19:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[1, 13, 16, 19]]);\n    }));\n\n    return function updateProfile(_x) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: /*#__PURE__*/_jsxDEV(\"center\", {\n        children: [\"Please key in your username and indicate your preferences.\", \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 9\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n      \"aria-live\": \"polite\",\n      children: [loading ? \"Saving ...\" : /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: updateProfile,\n        className: \"form-widget\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [\"Email: \", session.user.email]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 13\n        }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"username\",\n            children: \"Name\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 15\n          }, _this), /*#__PURE__*/_jsxDEV(\"input\", {\n            id: \"username\",\n            type: \"text\",\n            value: username || \"\",\n            onChange: function onChange(e) {\n              return setUsername(e.target.value);\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 15\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 13\n        }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"brawl_stars\",\n            children: \"Brawl stars?\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 15\n          }, _this), /*#__PURE__*/_jsxDEV(\"input\", {\n            id: \"brawl_stars\",\n            type: \"boolean\",\n            value: brawl_stars || \"\",\n            onChange: function onChange(e) {\n              return setBrawlStars(e.target.value);\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 15\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 13\n        }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"button block primary\",\n            disabled: loading,\n            children: \"Update profile now\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 15\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 13\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 11\n      }, _this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        className: \"button block\",\n        onClick: function onClick() {\n          return supabase.auth.signOut();\n        },\n        children: \"Sign Out\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 9\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }, _this)]\n  }, void 0, true);\n};\n\n_s(Account, \"JWuMivPoynf5ioQ0h22q6eIWzEA=\");\n\n_c = Account;\nexport default Account;\n\nvar _c;\n\n$RefreshReg$(_c, \"Account\");","map":{"version":3,"names":["useState","useEffect","supabase","Account","session","loading","setLoading","username","setUsername","brawl_stars","setBrawlStars","avatar_url","setAvatarUrl","getProfile","user","auth","from","select","eq","id","single","data","error","status","lstOfPreferences","push","alert","message","updateProfile","e","preventDefault","updates","updated_at","Date","upsert","returning","email","target","value","signOut"],"sources":["C:/Users/ericl/findabudbud/src/Account.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\r\nimport { supabase } from \"./supabaseClient\";\r\n\r\nconst Account = ({ session }) => {\r\n  const [loading, setLoading] = useState(true);\r\n  const [username, setUsername] = useState(null);\r\n  const [brawl_stars, setBrawlStars] = useState(null);\r\n  const [avatar_url, setAvatarUrl] = useState(null);\r\n\r\n  useEffect(() => {\r\n    getProfile();\r\n  }, [session]);\r\n\r\n  const getProfile = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const user = supabase.auth.user();\r\n\r\n      let { data, error, status } = await supabase\r\n        .from(\"profiles\")\r\n        .select(`username, website, brawl_stars, avatar_url`)\r\n        .eq(\"id\", user.id)\r\n        .single();\r\n\r\n      if (error && status !== 406) {\r\n        throw error;\r\n      }\r\n\r\n      const lstOfPreferences = []\r\n\r\n      if (data) {\r\n        setUsername(data.username);\r\n        setBrawlStars(data.brawl_stars);\r\n        setAvatarUrl(data.avatar_url);\r\n        if (data.brawl_stars) {\r\n          lstOfPreferences.push(\"Brawl Stars\");\r\n          lstOfPreferences.push(\"Porn\");\r\n        }\r\n        alert(lstOfPreferences);\r\n      }\r\n    } catch (error) {\r\n      alert(error.message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const updateProfile = async (e) => {\r\n    e.preventDefault();\r\n\r\n    try {\r\n      setLoading(true);\r\n      const user = supabase.auth.user();\r\n\r\n      const updates = {\r\n        id: user.id,\r\n        username,\r\n        brawl_stars,\r\n        avatar_url,\r\n        updated_at: new Date()\r\n      };\r\n\r\n      let { error } = await supabase.from(\"profiles\").upsert(updates, {\r\n        returning: \"minimal\" // Don't return the value after inserting\r\n      });\r\n\r\n      if (error) {\r\n        throw error;\r\n      }\r\n    } catch (error) {\r\n      alert(error.message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <h1>\r\n        <center>\r\n          Please key in your username and indicate your preferences.{\" \"}\r\n        </center>\r\n      </h1>\r\n      <div aria-live=\"polite\">\r\n        {loading ? (\r\n          \"Saving ...\"\r\n        ) : (\r\n          <form onSubmit={updateProfile} className=\"form-widget\">\r\n            <div>Email: {session.user.email}</div>\r\n            <div>\r\n              <label htmlFor=\"username\">Name</label>\r\n              <input\r\n                id=\"username\"\r\n                type=\"text\"\r\n                value={username || \"\"}\r\n                onChange={(e) => setUsername(e.target.value)}\r\n              />\r\n            </div>\r\n            <div>\r\n              <label htmlFor=\"brawl_stars\">Brawl stars?</label>\r\n              <input\r\n                id=\"brawl_stars\"\r\n                type=\"boolean\"\r\n                value={brawl_stars || \"\"}\r\n                onChange={(e) => setBrawlStars(e.target.value)}\r\n              />\r\n            </div>\r\n            <div>\r\n              <button className=\"button block primary\" disabled={loading}>\r\n                Update profile now\r\n              </button>\r\n            </div>\r\n          </form>\r\n        )}\r\n        <button\r\n          type=\"button\"\r\n          className=\"button block\"\r\n          onClick={() => supabase.auth.signOut()}\r\n        >\r\n          Sign Out\r\n        </button>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Account;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}