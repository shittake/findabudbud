{"ast":null,"code":"import _objectWithoutProperties from \"C:/Users/ericl/findabudbud/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js\";\nimport _regeneratorRuntime from \"C:/Users/ericl/findabudbud/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"C:/Users/ericl/findabudbud/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _slicedToArray from \"C:/Users/ericl/findabudbud/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nvar _excluded = [\"error\"];\n\nvar _jsxFileName = \"C:\\\\Users\\\\ericl\\\\findabudbud\\\\src\\\\Pages\\\\FirstPage.js\",\n    _this = this,\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport { useState } from \"react\";\nimport React from 'react';\nimport { supabase } from \"../supabaseClient\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nvar FirstPage = function FirstPage(_ref) {\n  _s();\n\n  var session = _ref.session;\n\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      username = _useState2[0],\n      setUsername = _useState2[1];\n\n  var _useState3 = useState(null),\n      _useState4 = _slicedToArray(_useState3, 2),\n      brawl_stars = _useState4[0],\n      setBrawlStars = _useState4[1];\n\n  var user = supabase.auth.user();\n  useEffect(function () {\n    getProfile();\n  }, [session]);\n\n  var getProfile = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n      var _user, _yield$supabase$from$, _data, error, status;\n\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              setLoading(true);\n              _user = supabase.auth.user();\n              _context.next = 5;\n              return supabase.from(\"profiles\").select(\"username, website, brawl_stars, avatar_url\").eq(\"id\", _user.id).single();\n\n            case 5:\n              _yield$supabase$from$ = _context.sent;\n              _data = _yield$supabase$from$.data;\n              error = _yield$supabase$from$.error;\n              status = _yield$supabase$from$.status;\n\n              if (!(error && status !== 406)) {\n                _context.next = 11;\n                break;\n              }\n\n              throw error;\n\n            case 11:\n              if (_data) {\n                setUsername(_data.username);\n                setBrawlStars(_data.brawl_stars);\n                setAvatarUrl(_data.avatar_url);\n              }\n\n              _context.next = 17;\n              break;\n\n            case 14:\n              _context.prev = 14;\n              _context.t0 = _context[\"catch\"](0);\n              alert(_context.t0.message);\n\n            case 17:\n              _context.prev = 17;\n              setLoading(false);\n              return _context.finish(17);\n\n            case 20:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 14, 17, 20]]);\n    }));\n\n    return function getProfile() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [data.username, \"This is the first page.\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 3\n    }, _this)\n  }, void 0, false);\n};\n\n_s(FirstPage, \"Q9eRYzFcDUShNhtYylvaMxXkSv8=\");\n\n_c = FirstPage;\n\nfunction useOpenTodos() {\n  _s2();\n\n  return useQuery(['open-todos'], function () {\n    return supabase.from('profiles').select(\"username, website, brawl_stars, avatar_url\").eq(\"id\", user.id).then(handleSupabaseError).then(function (_ref3) {\n      var data = _ref3.data;\n      return data;\n    });\n  });\n}\n\n_s2(useOpenTodos, \"4ZpngI1uv+Uo3WQHEZmTQ5FNM+k=\", true);\n\nfunction handleSupabaseError(_ref4) {\n  var error = _ref4.error,\n      rest = _objectWithoutProperties(_ref4, _excluded);\n\n  if (error) {\n    throw error;\n  }\n\n  return rest;\n}\n\nexport default FirstPage;\n\nvar _c;\n\n$RefreshReg$(_c, \"FirstPage\");","map":{"version":3,"names":["useState","React","supabase","FirstPage","session","username","setUsername","brawl_stars","setBrawlStars","user","auth","useEffect","getProfile","setLoading","from","select","eq","id","single","data","error","status","setAvatarUrl","avatar_url","alert","message","useOpenTodos","useQuery","then","handleSupabaseError","rest"],"sources":["C:/Users/ericl/findabudbud/src/Pages/FirstPage.js"],"sourcesContent":["import { useState } from \"react\";\r\nimport React from 'react';\r\nimport { supabase } from \"../supabaseClient\";\r\n\r\nconst FirstPage = ({session}) => {\r\n\tconst [username, setUsername] = useState(null);\r\n  \tconst [brawl_stars, setBrawlStars] = useState(null);\r\n  \tconst user = supabase.auth.user();\r\n\r\n    useEffect(() => {\r\n    getProfile();\r\n  }, [session]);\r\n\r\n  const getProfile = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const user = supabase.auth.user();\r\n\r\n      let { data, error, status } = await supabase\r\n        .from(\"profiles\")\r\n        .select(`username, website, brawl_stars, avatar_url`)\r\n        .eq(\"id\", user.id)\r\n        .single();\r\n\r\n      if (error && status !== 406) {\r\n        throw error;\r\n      }\r\n\r\n      if (data) {\r\n        setUsername(data.username);\r\n        setBrawlStars(data.brawl_stars);\r\n        setAvatarUrl(data.avatar_url);\r\n      }\r\n    } catch (error) {\r\n      alert(error.message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n\treturn (\r\n\t<>\r\n\t\t<div>\r\n\t\t{data.username}\r\n\t\tThis is the first page.\r\n\t\t</div>\r\n\t</>);\r\n}\r\n\r\nfunction useOpenTodos() {\r\n  return useQuery(\r\n    ['open-todos'],\r\n    () => supabase\r\n            .from('profiles')\r\n            .select(`username, website, brawl_stars, avatar_url`)\r\n        \t.eq(\"id\", user.id)\r\n            .then(handleSupabaseError)\r\n            .then(({ data }) => data)\r\n  );\r\n}\r\n\r\nfunction handleSupabaseError({ error, ...rest }) {\r\n  if (error) {\r\n    throw error;\r\n  }\r\n  return rest;\r\n}\r\n\r\nexport default FirstPage;"],"mappings":";;;;;;;;;;;AAAA,SAASA,QAAT,QAAyB,OAAzB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,QAAT,QAAyB,mBAAzB;;;;AAEA,IAAMC,SAAS,GAAG,SAAZA,SAAY,OAAe;EAAA;;EAAA,IAAbC,OAAa,QAAbA,OAAa;;EAChC,gBAAgCJ,QAAQ,CAAC,IAAD,CAAxC;EAAA;EAAA,IAAOK,QAAP;EAAA,IAAiBC,WAAjB;;EACE,iBAAqCN,QAAQ,CAAC,IAAD,CAA7C;EAAA;EAAA,IAAOO,WAAP;EAAA,IAAoBC,aAApB;;EACA,IAAMC,IAAI,GAAGP,QAAQ,CAACQ,IAAT,CAAcD,IAAd,EAAb;EAECE,SAAS,CAAC,YAAM;IAChBC,UAAU;EACX,CAFU,EAER,CAACR,OAAD,CAFQ,CAAT;;EAIF,IAAMQ,UAAU;IAAA,uEAAG;MAAA;;MAAA;QAAA;UAAA;YAAA;cAAA;cAEfC,UAAU,CAAC,IAAD,CAAV;cACMJ,KAHS,GAGFP,QAAQ,CAACQ,IAAT,CAAcD,IAAd,EAHE;cAAA;cAAA,OAKqBP,QAAQ,CACzCY,IADiC,CAC5B,UAD4B,EAEjCC,MAFiC,+CAGjCC,EAHiC,CAG9B,IAH8B,EAGxBP,KAAI,CAACQ,EAHmB,EAIjCC,MAJiC,EALrB;;YAAA;cAAA;cAKTC,KALS,yBAKTA,IALS;cAKHC,KALG,yBAKHA,KALG;cAKIC,MALJ,yBAKIA,MALJ;;cAAA,MAWXD,KAAK,IAAIC,MAAM,KAAK,GAXT;gBAAA;gBAAA;cAAA;;cAAA,MAYPD,KAZO;;YAAA;cAef,IAAID,KAAJ,EAAU;gBACRb,WAAW,CAACa,KAAI,CAACd,QAAN,CAAX;gBACAG,aAAa,CAACW,KAAI,CAACZ,WAAN,CAAb;gBACAe,YAAY,CAACH,KAAI,CAACI,UAAN,CAAZ;cACD;;cAnBc;cAAA;;YAAA;cAAA;cAAA;cAqBfC,KAAK,CAAC,YAAMC,OAAP,CAAL;;YArBe;cAAA;cAuBfZ,UAAU,CAAC,KAAD,CAAV;cAvBe;;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IAAA,CAAH;;IAAA,gBAAVD,UAAU;MAAA;IAAA;EAAA,GAAhB;;EA2BD,oBACA;IAAA,uBACC;MAAA,WACCO,IAAI,CAACd,QADN;IAAA;MAAA;MAAA;MAAA;IAAA;EADD,iBADA;AAOA,CA3CD;;GAAMF,S;;KAAAA,S;;AA6CN,SAASuB,YAAT,GAAwB;EAAA;;EACtB,OAAOC,QAAQ,CACb,CAAC,YAAD,CADa,EAEb;IAAA,OAAMzB,QAAQ,CACLY,IADH,CACQ,UADR,EAEGC,MAFH,+CAGAC,EAHA,CAGG,IAHH,EAGSP,IAAI,CAACQ,EAHd,EAIGW,IAJH,CAIQC,mBAJR,EAKGD,IALH,CAKQ;MAAA,IAAGT,IAAH,SAAGA,IAAH;MAAA,OAAcA,IAAd;IAAA,CALR,CAAN;EAAA,CAFa,CAAf;AASD;;IAVQO,Y;;AAYT,SAASG,mBAAT,QAAiD;EAAA,IAAlBT,KAAkB,SAAlBA,KAAkB;EAAA,IAARU,IAAQ;;EAC/C,IAAIV,KAAJ,EAAW;IACT,MAAMA,KAAN;EACD;;EACD,OAAOU,IAAP;AACD;;AAED,eAAe3B,SAAf"},"metadata":{},"sourceType":"module"}