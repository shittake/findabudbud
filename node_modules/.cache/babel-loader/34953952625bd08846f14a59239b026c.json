{"ast":null,"code":"import _slicedToArray from \"C:/Users/ericl/findabudbud/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport _classCallCheck from \"C:/Users/ericl/findabudbud/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"C:/Users/ericl/findabudbud/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _inherits from \"C:/Users/ericl/findabudbud/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"C:/Users/ericl/findabudbud/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport { PostgrestBuilder } from './types';\nimport PostgrestFilterBuilder from './PostgrestFilterBuilder';\n\nvar PostgrestRpcBuilder = /*#__PURE__*/function (_PostgrestBuilder) {\n  _inherits(PostgrestRpcBuilder, _PostgrestBuilder);\n\n  var _super = _createSuper(PostgrestRpcBuilder);\n\n  function PostgrestRpcBuilder(url) {\n    var _this;\n\n    var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n        _ref$headers = _ref.headers,\n        headers = _ref$headers === void 0 ? {} : _ref$headers,\n        schema = _ref.schema,\n        fetch = _ref.fetch,\n        shouldThrowOnError = _ref.shouldThrowOnError;\n\n    _classCallCheck(this, PostgrestRpcBuilder);\n\n    _this = _super.call(this, {\n      fetch: fetch,\n      shouldThrowOnError: shouldThrowOnError\n    });\n    _this.url = new URL(url);\n    _this.headers = Object.assign({}, headers);\n    _this.schema = schema;\n    return _this;\n  }\n  /**\n   * Perform a function call.\n   */\n\n\n  _createClass(PostgrestRpcBuilder, [{\n    key: \"rpc\",\n    value: function rpc(params) {\n      var _this2 = this;\n\n      var _ref2 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n          _ref2$head = _ref2.head,\n          head = _ref2$head === void 0 ? false : _ref2$head,\n          _ref2$count = _ref2.count,\n          count = _ref2$count === void 0 ? null : _ref2$count;\n\n      if (head) {\n        this.method = 'HEAD';\n\n        if (params) {\n          Object.entries(params).forEach(function (_ref3) {\n            var _ref4 = _slicedToArray(_ref3, 2),\n                name = _ref4[0],\n                value = _ref4[1];\n\n            _this2.url.searchParams.append(name, value);\n          });\n        }\n      } else {\n        this.method = 'POST';\n        this.body = params;\n      }\n\n      if (count) {\n        if (this.headers['Prefer'] !== undefined) this.headers['Prefer'] += \",count=\".concat(count);else this.headers['Prefer'] = \"count=\".concat(count);\n      }\n\n      return new PostgrestFilterBuilder(this);\n    }\n  }]);\n\n  return PostgrestRpcBuilder;\n}(PostgrestBuilder);\n\nexport { PostgrestRpcBuilder as default };","map":{"version":3,"mappings":";;;;;AAAA,SAAgBA,gBAAhB,QAAwC,SAAxC;AACA,OAAOC,sBAAP,MAAmC,0BAAnC;;IAEqBC,mB;;;;;EACnB,6BACEC,GADF,EAYQ;IAAA;;IAAA,+EAAF,EAAE;IAAA,wBATJC,OASI;IAAA,IATJA,OASI,6BATM,EASN;IAAA,IARJC,MAQI,QARJA,MAQI;IAAA,IAPJC,KAOI,QAPJA,KAOI;IAAA,IANJC,kBAMI,QANJA,kBAMI;;IAAA;;IAEN,0BAAO;MAAED,KAAK,EAALA,KAAF;MAASC,kBAAkB,EAAlBA;IAAT,CAAP;IACA,MAAKJ,GAAL,GAAW,IAAIK,GAAJ,CAAQL,GAAR,CAAX;IACA,MAAKC,OAAL,GAAYK,kBAAQL,OAAR,CAAZ;IACA,MAAKC,MAAL,GAAcA,MAAd;IALM;EAMP;EAED;;;;;;;WAGA,aACEK,MADF,EAQQ;MAAA;;MAAA,gFAAF,EAAE;MAAA,uBALJC,IAKI;MAAA,IALJA,IAKI,2BALG,KAKH;MAAA,wBAJJC,KAII;MAAA,IAJJA,KAII,4BAJI,IAIJ;;MAEN,IAAID,IAAJ,EAAU;QACR,KAAKE,MAAL,GAAc,MAAd;;QAEA,IAAIH,MAAJ,EAAY;UACVD,MAAM,CAACK,OAAP,CAAeJ,MAAf,EAAuBK,OAAvB,CAA+B,iBAAkB;YAAA;YAAA,IAAhBC,IAAgB;YAAA,IAAVC,KAAU;;YAC/C,MAAI,CAACd,GAAL,CAASe,YAAT,CAAsBC,MAAtB,CAA6BH,IAA7B,EAAmCC,KAAnC;UACD,CAFD;QAGD;MACF,CARD,MAQO;QACL,KAAKJ,MAAL,GAAc,MAAd;QACA,KAAKO,IAAL,GAAYV,MAAZ;MACD;;MAED,IAAIE,KAAJ,EAAW;QACT,IAAI,KAAKR,OAAL,CAAa,QAAb,MAA2BiB,SAA/B,EAA0C,KAAKjB,OAAL,CAAa,QAAb,sBAAoCQ,KAApC,EAA1C,KACK,KAAKR,OAAL,CAAa,QAAb,oBAAkCQ,KAAlC;MACN;;MAED,OAAO,IAAIX,sBAAJ,CAA2B,IAA3B,CAAP;IACD;;;;EArDiDD,gB;;SAA/BE,mB","names":["PostgrestBuilder","PostgrestFilterBuilder","PostgrestRpcBuilder","url","headers","schema","fetch","shouldThrowOnError","URL","Object","params","head","count","method","entries","forEach","name","value","searchParams","append","body","undefined"],"sourceRoot":"","sources":["../../../src/lib/PostgrestRpcBuilder.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}